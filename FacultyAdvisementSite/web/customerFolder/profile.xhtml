<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:b="http://bootsfaces.net/ui"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core">
    <h:head>
        <title>Student Profile</title>
        <link rel="stylesheet" href="p3css.css" />
    </h:head> 
    <h:body>

        <f:metadata>
            <f:viewAction action="#{verificationBean.checkVerificationRedirect(userBean.username)}"/>
        </f:metadata>

        <br/>
        <b:container>
            <b:jumbotron>
                <h2>Hi! #{userBean.username}</h2>
                <p>Student Information</p>
                <b:form id="studentForm" >
                    <h:panelGrid columns="2" width="50%">

                        <h:panelGroup rendered="#{userBean.student.edit}"/>
                        <h:message for="id" errorStyle="color: red" rendered="#{userBean.student.edit}" />
                        <h:outputText style="font-size: large;" value="ID:"/>
                        <b:inputText id="id" value="#{userBean.student.id}" rendered="#{userBean.student.edit}" />
                        <h:outputText style="font-size: large;" value="#{userBean.student.id}" rendered="#{!userBean.student.edit}"/>

                        <h:outputText style="font-size: large;" value="Major Code:"/>
                        <b:selectOneMenu id="majorCode" value="#{userBean.student.majorCode}" rendered="#{userBean.student.edit}">
                            <f:selectItems value="#{utility.availableMajors}"/>
                        </b:selectOneMenu>
                        <h:outputText style="font-size: large;" value="#{userBean.student.majorCode}" rendered="#{!userBean.student.edit}"/>

                        <h:panelGroup rendered="#{userBean.student.edit}"/>
                        <h:message for="phoneNumber" errorStyle="color: red" rendered="#{userBean.student.edit}"/>
                        <h:outputText style="font-size: large;" value="Phone Number:"/>
                        <b:inputText id="phoneNumber" value="#{userBean.student.phoneNumber}" rendered="#{userBean.student.edit}"/>
                        <h:outputText style="font-size: large;" value="#{userBean.student.phoneNumber}" converter="phoneConverter" rendered="#{!userBean.student.edit}"/>

                    </h:panelGrid>

                    <br/>
                    <b:commandButton value="Edit" iconAwesome="pencil-square-o" id="edit" action="#{userBean.student.setEdit(true)}"
                                     rendered="#{!userBean.student.edit}">
                    </b:commandButton>
                    <b:commandButton value="Save" iconAwesome="floppy-o" id="save" action="#{userBean.validateForm()}"
                                     rendered="#{userBean.student.edit}">
                    </b:commandButton>

                    <b:button value="Change Password" iconAwesome="unlock" outcome="/customerFolder/resetMyPassword" rendered="#{!userBean.student.edit}"/> <br/>
                    
                    <h:message for="save" errorStyle="color: red" infoStyle="color: green"/> <br/>
                    
                </b:form>
            </b:jumbotron>

            <b:accordion expanded-panels="panel1, panel2">
                <b:panel id="panel1" look="primary"  title="Completed Courses"> 
                    <h:form>
                        <b:dataTable value="#{userBean.completedCourses}" var="course">
                            <b:dataTableColumn label="Course Name" value="#{course.name}" order="asc"/>
                            <b:dataTableColumn label="Course Subject" value="#{course.subject}" order="asc"/>
                            <b:dataTableColumn label="Course Number" value="#{course.number}" order="asc"/>
                            <b:dataTableColumn label="Course Credits" value="#{course.credits}" order="asc"/>
                            <b:dataTableColumn label="Delete" orderable="false">
                                <b:commandButton value="Delete" iconAwesome="trash-o" action="#{userBean.removeCompletedCourse(course)}"
                                                 />
                            </b:dataTableColumn>

                        </b:dataTable>
                    </h:form>    
                </b:panel>
                <b:panel id="panel2"  look="primary" title="Available Courses"> 
                    <h:form>
                        <b:dataTable value="#{userBean.availableCourses}" var="course">
                            <b:dataTableColumn label="Course Name" value="#{course.name}" order="asc"/>
                            <b:dataTableColumn label="Course Subject" value="#{course.subject}" order="asc"/>
                            <b:dataTableColumn label="Course Number" value="#{course.number}" order="asc"/>
                            <b:dataTableColumn label="Course Credits" value="#{course.credits}" order="asc"/>
                            <b:dataTableColumn label="Add" orderable="false">
                                <b:commandButton value="Add" iconAwesome="plus" action="#{userBean.addCompletedCourse(course)}"
                                                 />
                            </b:dataTableColumn>

                        </b:dataTable>
                    </h:form>    
                </b:panel>
            </b:accordion>

            <b:panel>
                <h:link value="Advisement" outcome="/customerFolder/advisement" /> <br />  
                <h:link value="Logout" outcome="/logout" /> <br />
            </b:panel>


        </b:container>
    </h:body>
</html>

